(()=>{"use strict";class e{constructor(e){this._element=e,this.started=!1,this.goblin=null,this.interval=null,this.pos=-1}startGame(){const e=document.querySelectorAll("input");this._createCells();const t=this._element.querySelectorAll(".cell");this._createGoblin(),this._addCellClickListeners(t,e),this._startGoblinMovement(t),this.started=!0}_addCellClickListeners(e,t){e.forEach((s=>{s.addEventListener("click",(()=>{s.classList.contains("withGoblin")?(t[0].value=(parseInt(t[0].value)||0)+1,this._resetGoblinMovement(e)):t[1].value=(parseInt(t[1].value)||0)+1}))})),this._moveGoblin(e)}resetGame(){clearInterval(this.interval),this._element.innerHTML="",this.started=!1,document.querySelectorAll("input").forEach((e=>{e.value=0}))}_createCells(){for(let e=0;e<16;e++){const e=document.createElement("div");e.classList.add("cell"),this._element.appendChild(e)}}_createGoblin(){const e=document.createElement("div");e.classList.add("goblin"),e.addEventListener("mouseenter",(()=>{e.classList.add("scale")})),e.addEventListener("mouseleave",(()=>{e.classList.remove("scale")})),this.goblin=e}_moveGoblin(e){let t;do{t=this._getRandomInt(0,16)}while(this.pos===t);-1!==this.pos&&e[this.pos].classList.remove("withGoblin"),this.pos=t;const s=e[t];s.appendChild(this.goblin),s.classList.add("withGoblin")}_getRandomInt(e,t){return Math.floor(Math.random()*(t-e)+e)}_startGoblinMovement(e){this._moveGoblin(e),this.interval=setInterval((()=>{this._moveGoblin(e)}),1500)}_resetGoblinMovement(e){clearInterval(this.interval),this._startGoblinMovement(e)}}document.addEventListener("DOMContentLoaded",(()=>{const t=new e(document.getElementById("gameField"));window.game=t;const s=document.querySelector("button.start"),n=document.querySelector("button.reset");s.addEventListener("click",(()=>{!t.started&&confirm("начать игру?")&&t.startGame()})),n.addEventListener("click",(()=>{t.started&&confirm("сбросить игру?")&&t.resetGame()}))}))})();