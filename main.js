(()=>{"use strict";class t{constructor(t){this._element=t,this.started=!1,this.goblin=null,this.interval=null,this.knocked=!1}startGame(){const t=document.querySelectorAll("input");this._createCells();const e=this._element.querySelectorAll(".cell");this._createGoblin(),this._addCellClickListeners(e,t),this._startGoblinMovement(e),this.started=!0}_addCellClickListeners(t,e){t.forEach((n=>{n.addEventListener("click",(()=>{n.classList.contains("withGoblin")?(e[0].value=(parseInt(e[0].value)||0)+1,this.knocked=!0,this._resetGoblinMovement(t)):e[1].value=(parseInt(e[1].value)||0)+1}));const i=this._getGoblinPosition(t);this._moveGoblin(i,t)}))}resetGame(){clearInterval(this.interval),this._element.innerHTML="",this.started=!1,document.querySelectorAll("input").forEach((t=>{t.value=0}))}_createCells(){for(let t=0;t<16;t++){const t=document.createElement("div");t.classList.add("cell"),this._element.appendChild(t)}}_createGoblin(){const t=document.createElement("div");t.classList.add("goblin"),this.goblin=t}_getGoblinPosition(t){return Array.prototype.indexOf.call(t,this.goblin.closest(".cell"))}_moveGoblin(t,e){let n;do{n=this._getRandomInt(0,16)}while(t===n);-1!==t&&e[t].classList.remove("withGoblin");const i=e[n];i.appendChild(this.goblin),i.classList.add("withGoblin")}_getRandomInt(t,e){return Math.floor(Math.random()*(e-t)+t)}_startGoblinMovement(t){const e=this._getGoblinPosition(t);this._moveGoblin(e,t),this.interval=setInterval((()=>{this._moveGoblin(e,t)}),1500)}_resetGoblinMovement(t){clearInterval(this.interval),this._startGoblinMovement(t)}}document.addEventListener("DOMContentLoaded",(()=>{const e=new t(document.getElementById("gameField"));window.game=e;const n=document.querySelector("button.start"),i=document.querySelector("button.reset");n.addEventListener("click",(()=>{confirm("начать игру?")&&e.startGame()})),i.addEventListener("click",(()=>{e.started&&confirm("сбросить игру?")&&e.resetGame()}))}))})();